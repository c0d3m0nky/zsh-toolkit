#!/bin/zsh

if [[ ${ZSHCOM__feat_rclone:?} == true ]]
then
  alias rmv="rclone move -P --ignore-existing"
else
  _trace "rclone not installed"
fi

alias listDirs="find ./ -type d"

function whatsmyip() {
  if command -v host >/dev/null 2>&1; then
    # shellcheck disable=SC2016
    host myip.opendns.com resolver1.opendns.com | ack 'myip.opendns.com has address ([\d.]+)' --output '\$1'
  elif command -v host >/dev/null 2>&1; then
    curl checkip.amazonaws.com
  else
    >&2 echo "host nor curl commands available"
    exit 1
  fi
}

if [[ -n $ZSHCOM__known_os && $ZSHCOM__known_os == 'win' ]]; then  alias clip="tee /dev/clipboard";
else alias clip="tee >(xclip -r -selection clipboard)"; fi

# shellcheck disable=SC2154
alias popout='upd=$(dirname "$(pwd)"); while [[ ! -d "$upd" ]]; do upd=$(dirname "$upd"); done; cd "$upd"'

### System
# shellcheck disable=SC2142
# shellcheck disable=SC2154
alias ztk-varCache="for f in \$(find \$ZSHCOM/.var*); do echo \$(basename \$f) | ack '^\.var_(.+)$' --output '\$1'; cat \$f; done"

# shellcheck disable=SC2142
alias dockerStop='$HOME/scripts/dockerStop.sh $@'
alias rmrf='rm -rf'
alias view='nano -Sv'

if ! command -v json_pp &> /dev/null
then
  alias json_pp='python3 -m json.tool'
fi

if ! command -v xml_pp &> /dev/null
then
  if command -v xmllint &> /dev/null
  then
    alias xml_pp="xmllint --format -"
  else
    echo No xml pretty printer
  fi
fi
